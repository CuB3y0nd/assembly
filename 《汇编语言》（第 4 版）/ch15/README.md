## 检测点 15.1

```
（1）仔细分析以下上面的 int 9 中断例程，看看是否可以精简以下？

其实在我们的 int 9 中断例程中，模拟 int 指令调用原 int 9 中断例程的程序是可以精简的，因为在进入中断例程后，IF 和 TF 都已经设置 0，没有必要再进行设置了。对于程序段：

pushf
pushf
pop bx
and bh, 11111100b
push bx
popf
call dword ptr ds:[0]

可以精简为：

________
________

两条指令。
```

```asm
pushf
call dword ptr ds:[0]
```

```
（2）仔细分析上面的程序中的主程序，看看有什么潜在的问题？

在主程序中，如果在执行设置 int 9 中断例程的段地址和偏移地址的指令之间发生了键盘中断，则 CPU 将转去执行一个错误的地址执行，将发生错误。

找出这样的程序段，改写它们，排除潜在的问题。

提示，注意 sti 和 cli 指令的用法。
```

[源码](../codes/quiz_15-1.asm)

## 实验 15：安装新的 int 9 中断例程

```
安装一个新的 int 9 中断例程，功能：在 DOS 下，按下 "A" 键后，除非不再松开，如果松开，就显示满屏幕的 "A"，其它键照常处理。

提示，按下一个键时产生的扫描码称为通码，松开一个键产生的扫描码称为断码。断码 = 通码 + 80h。
```

[源码](../codes/lab_15.asm)
